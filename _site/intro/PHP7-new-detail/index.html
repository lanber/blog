<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>PHP7新特性总结 &#8211; 邵洪泉的博客</title>
<meta name="description" content="描述PHP7新特性。PHP7新特性总结">
<meta name="keywords" content="php">



<!-- Open Graph -->
<meta property="og:locale" content="zh_CN">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP7新特性总结">
<meta property="og:description" content="描述PHP7新特性。PHP7新特性总结">
<meta property="og:url" content="/intro/PHP7-new-detail/">
<meta property="og:site_name" content="邵洪泉的博客">
<meta property="og:image" content="/images/images/logo.png">





<link rel="canonical" href="/intro/PHP7-new-detail/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="邵洪泉的博客 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">




<script type="text/javascript" src="/assets/js/vendor/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
	$(function(){
		
			var flag = 250;
		
		$(window).scroll(function(){
			var a=$(".header-menu"),b=$(window).scrollTop();
			b>flag?a.attr("class","header-menu header-menu-overflow"):a.attr("class","header-menu header-menu-top");
		})
	})
</script>

</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->


<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="/">
          
            <img class="logo" src="/images/logo.png" alt="邵洪泉的博客">
          
          <a href="/" class="title"> 邵洪泉的博客</a>
        </a>
      </li>
      
        
        

        
            
                <li class="header-item "><a href="/about"><h3>关于我</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="https://lanber.github.io/blog/tags/"><h3>分类</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="/"><h3>首页</h3></a></li>
            
        
      
    </ul>
  </div>
<div class="entry-header" id="header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>PHP7新特性总结</h1>
      
        <h2><span class="entry-date date published updated"><time datetime="2016-03-18T00:00:00+08:00">March 18, 2016</time></span></h2>
      

      
        <p class="entry-reading-time">
          <i class="fa fa-clock-o"></i>
          
          Reading time ~2 minutes
        </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="/"><h3>首页</h3></a></li>
      
    
      
        <li><a href="https://lanber.github.io/blog/tags/"><h3>分类</h3></a></li>
      
    
      
        <li><a href="/about"><h3>关于我</h3></a></li>
      
    
  </ul>
</nav>




<div id="main" role="main">
  <article class="hentry">
    <div class="entry-content">
        
      <h1 class="post-title entry-title">PHP7新特性总结</h1>
      <figure class="center">
    <a href="#"><img src="/images/php-7-1.jpg" alt=""></a>
</figure>

<p>PHP7版本相较于老版本，加了大量新特性，同时性能得到了显著提升：是PHP5.6性能的2倍，在wordpress表
现上超过了HHVM。下面来总结下PHP7新增的特性。</p>

<!-- more -->

<h1>一、新增特性</h1>

<h2>1、标量类型声明</h2>

<p>现在可以使用下列类型参数（无论用强制模式还是严格模式）：字符串(string),整数 (int), 浮点数
 (float), 以及布尔值 (bool)。它们扩充了PHP5中引入的其他类型：类名，接口，数组和回调类型。
 其有两种模式：强制模式和严格模式。
*强制模式</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">function</span> <span class="n">get</span><span class="p">(</span><span class="n">int</span> <span class="vg">$bool</span><span class="p">){</span>
<span class="n">var_dump</span><span class="p">(</span><span class="vg">$bool</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">get</span><span class="p">(</span><span class="kp">true</span><span class="p">);</span><span class="sr">//</span><span class="err">将显示</span><span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></code></pre></figure>

<p>*严格模式
在文件顶部添加：</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">declare</span><span class="p">(</span><span class="n">strict_types</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span></code></pre></figure>

<p>在此模式下，若参数与所声明类型不符合，则会触发致命错误。</p>

<h2>2、返回值类型声明</h2>

<p>PHP 7 增加了对返回类型声明的支持。类似于参数类型声明，返回类型声明指明了函数返回值的类型。
可用的类型与参数声明中可用的类型相同。同时也包含强制模式和严格模式。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">function</span> <span class="n">arraysSum</span><span class="p">(</span><span class="n">array</span> <span class="p">.</span><span class="nf">.</span><span class="o">.</span><span class="vg">$arrays</span><span class="p">):</span> <span class="n">array</span><span class="p">{</span>
    <span class="k">return</span> <span class="n">array_map</span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">array</span> <span class="vg">$array</span><span class="p">):</span> <span class="n">int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">array_sum</span><span class="p">(</span><span class="vg">$array</span><span class="p">);</span>
    <span class="p">},</span> <span class="vg">$arrays</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">print_r</span><span class="p">(</span><span class="n">arraysSum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]));</span>
<span class="sr">//</span><span class="err">将会输出</span>
<span class="no">Array</span>

<span class="p">(</span>

<span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">6</span>

<span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">15</span>

<span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">24</span>

<span class="p">)</span></code></pre></figure>

<h2>3、null 合并运算符</h2>

<p>新增了 null 合并运算符 (??)。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vg">$username</span> <span class="o">=</span> <span class="vg">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span> <span class="sc">??</span> <span class="s1">'nobody'</span><span class="p">;</span></code></pre></figure>

<p>等价于</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vg">$username</span> <span class="o">=</span> <span class="n">isset</span><span class="p">(</span><span class="vg">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">])</span> <span class="p">?</span> <span class="vg">$_GET</span><span class="p">[</span><span class="s1">'user'</span><span class="p">]</span> <span class="p">:</span> <span class="s1">'nobody'</span><span class="p">;</span></code></pre></figure>

<h2>4、太空船操作符（组合比较符）</h2>

<p>太空船操作符（&lt;=&gt;）用于比较两个表达式。当操作符左边小于、等于或大于右边时它分别返回-1、0或1。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">echo</span> <span class="mi">1</span> <span class="o">&lt;=&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="sr">//</span> <span class="mi">0</span>
<span class="n">echo</span> <span class="mi">1</span> <span class="o">&lt;=&gt;</span> <span class="mi">2</span><span class="p">;</span> <span class="sr">//</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">echo</span> <span class="mi">2</span> <span class="o">&lt;=&gt;</span> <span class="mi">1</span><span class="p">;</span> <span class="sr">//</span> <span class="mi">1</span></code></pre></figure>

<h2>5、通过 define() 定义常量数组</h2>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">define</span><span class="p">(</span><span class="s1">'ANIMALS'</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">'dog'</span><span class="p">,</span>
    <span class="s1">'cat'</span><span class="p">,</span>
    <span class="s1">'bird'</span>
<span class="p">]);</span></code></pre></figure>

<h2>6、匿名类</h2>

<p>现在支持通过new class 来实例化一个匿名类，这可以用来替代一些“用后即焚”的完整类定义。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">interface</span> <span class="no">Logger</span> <span class="p">{</span>
    <span class="kp">public</span> <span class="n">function</span> <span class="n">log</span><span class="p">(</span><span class="n">string</span> <span class="vg">$msg</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Application</span> <span class="p">{</span>
    <span class="kp">private</span> <span class="vg">$logger</span><span class="p">;</span>

    <span class="kp">public</span> <span class="n">function</span> <span class="n">getLogger</span><span class="p">():</span> <span class="no">Logger</span> <span class="p">{</span>
         <span class="k">return</span> <span class="vg">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kp">public</span> <span class="n">function</span> <span class="n">setLogger</span><span class="p">(</span><span class="no">Logger</span> <span class="vg">$logger</span><span class="p">)</span> <span class="p">{</span>
         <span class="vg">$this</span><span class="o">-&gt;</span><span class="n">logger</span> <span class="o">=</span> <span class="vg">$logger</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="vg">$app</span> <span class="o">=</span> <span class="kp">new</span> <span class="no">Application</span><span class="p">;</span>
<span class="vg">$app</span><span class="o">-&gt;</span><span class="n">setLogger</span><span class="p">(</span><span class="kp">new</span> <span class="k">class</span> <span class="n">implements</span> <span class="no">Logger</span> <span class="p">{</span>
    <span class="kp">public</span> <span class="n">function</span> <span class="n">log</span><span class="p">(</span><span class="n">string</span> <span class="vg">$msg</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">echo</span> <span class="vg">$msg</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="n">var_dump</span><span class="p">(</span><span class="vg">$app</span><span class="o">-&gt;</span><span class="n">getLogger</span><span class="p">());</span></code></pre></figure>

<h2>7、Unicode codepoint 转译语法</h2>

<p>可将16进制形式的 Unicode codepoint，转换并打印出一个双引号或heredoc包围的 UTF-8 
编码格式的字符串。可以接受任何有效的 codepoint，并且开头的 0 是可以省略的。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">echo</span> <span class="s2">"</span><span class="se">\u</span><span class="s2">{aa}"</span><span class="p">;</span>    <span class="sr">//</span><span class="err">ª</span>
<span class="n">echo</span> <span class="s2">"</span><span class="se">\u</span><span class="s2">{0000aa}"</span><span class="p">;</span><span class="sr">//</span><span class="err">ª</span>
<span class="n">echo</span> <span class="s2">"</span><span class="se">\u</span><span class="s2">{9999}"</span><span class="p">;</span>  <span class="sr">//</span><span class="err">香</span></code></pre></figure>

<h2>8、Closure::call()</h2>

<p>Closure::call() 现在有着更好的性能，简短干练的暂时绑定一个方法到对象上闭包并调用它。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span><span class="kp">private</span> <span class="vg">$x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;}</span>
<span class="vg">$getX</span> <span class="o">=</span> <span class="n">function</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="vg">$this</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;};</span>
<span class="n">echo</span> <span class="vg">$getX</span><span class="o">-&gt;</span><span class="n">call</span><span class="p">(</span><span class="kp">new</span> <span class="no">A</span><span class="p">);</span><span class="sr">//</span><span class="mi">1</span></code></pre></figure>

<h2>9、为 unserialize() 提供过滤</h2>

<p>这个特性旨在提供更安全的方式解包不可靠的数据。它通过白名单的方式来防止潜在的代码注入。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vg">$data</span> <span class="o">=</span> <span class="n">unserialize</span><span class="p">(</span><span class="vg">$foo</span><span class="p">,</span> <span class="p">[</span><span class="s2">"allowed_classes"</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"MyClass"</span><span class="p">,</span> <span class="s2">"MyClass2"</span><span class="p">]]);</span></code></pre></figure>

<h2>10、IntlChar</h2>

<p>用于暴露出更多的 ICU（是一套稳定成熟、功能强大、轻便易用和跨平台支持Unicode 的开发包） 功能。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">printf</span><span class="p">(</span><span class="s1">'%x'</span><span class="p">,</span> <span class="no">IntlChar</span><span class="o">::</span><span class="no">CODEPOINT_MAX</span><span class="p">);</span><span class="sr">//</span><span class="mi">10</span><span class="n">ffff</span>
<span class="n">echo</span> <span class="no">IntlChar</span><span class="o">::</span><span class="n">charName</span><span class="p">(</span><span class="s1">'@'</span><span class="p">);</span>         <span class="sr">//</span><span class="no">COMMERCIAL</span> <span class="no">AT</span>
<span class="n">var_dump</span><span class="p">(</span><span class="no">IntlChar</span><span class="o">::</span><span class="n">ispunct</span><span class="p">(</span><span class="s1">'!'</span><span class="p">));</span>     <span class="sr">//</span><span class="n">bool</span><span class="p">(</span><span class="kp">true</span><span class="p">)</span></code></pre></figure>

<p>需安装intl扩展</p>

<h2>11、预期</h2>

<p>预期是向后兼用并增强之前的 assert()（检查一个断言是否为false） 的方法。 
它使得在生产环境中启用断言为零成本，并且提供当断言失败时抛出特定异常的能力。
老版本的API出于兼容目的将继续被维护，assert()
现在是一个语言结构，它允许第一个参数是一个表达式，而不仅仅是一个待计算的 
string或一个待测试的boolean。</p>

<h2>12、使用use声明组</h2>

<p>从同一 namespace 导入的类、函数和常量现在可以通过单个 use 语句 一次性导入了。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">use</span> <span class="n">some</span><span class="p">\</span><span class="n">namespace</span><span class="p">\{</span><span class="no">ClassA</span><span class="p">,</span> <span class="no">ClassB</span><span class="p">,</span> <span class="no">ClassC</span> <span class="n">as</span> <span class="no">C</span><span class="p">};</span>
<span class="n">use</span> <span class="n">function</span> <span class="n">some</span><span class="p">\</span><span class="n">namespace</span><span class="p">\{</span><span class="n">fn_a</span><span class="p">,</span> <span class="n">fn_b</span><span class="p">,</span> <span class="n">fn_c</span><span class="p">};</span>
<span class="n">use</span> <span class="n">const</span> <span class="n">some</span><span class="p">\</span><span class="n">namespace</span><span class="p">\{</span><span class="no">ConstA</span><span class="p">,</span> <span class="no">ConstB</span><span class="p">,</span> <span class="no">ConstC</span><span class="p">};</span></code></pre></figure>

<h2>13、生成器的返回值</h2>

<p>在 PHP7 中，当生成器迭代完成后，可以获取该生成器函数的返回值。通过 Generator::getReturn() 
得到。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vg">$gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">})();</span>

<span class="n">foreach</span> <span class="p">(</span><span class="vg">$gen</span> <span class="n">as</span> <span class="vg">$val</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">echo</span> <span class="vg">$val</span><span class="p">,</span> <span class="no">PHP_EOL</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">echo</span> <span class="vg">$gen</span><span class="o">-&gt;</span><span class="n">getReturn</span><span class="p">(),</span> <span class="no">PHP_EOL</span><span class="p">;</span>
<span class="sr">//</span><span class="err">将会输出</span>
<span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span></code></pre></figure>

<h2>14、迭代器中引用迭代器</h2>

<p>在生成器中可以引入另一个或几个生成器。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">function</span> <span class="n">gen</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">yield</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">2</span><span class="p">;</span>

    <span class="k">yield</span> <span class="n">from</span> <span class="n">gen2</span><span class="p">();</span>
<span class="p">}</span>

<span class="n">function</span> <span class="n">gen2</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">yield</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">yield</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h2>15、获取整数部分的新函数intdiv()</h2>

<p>接收两个参数作为被除数和除数，返回他们相除结果的整数部分。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">var_dump</span><span class="p">(</span><span class="n">intdiv</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span><span class="sr">//in</span><span class="n">t</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span></code></pre></figure>

<h2>16、Session options</h2>

<p>session<em>start() 函数可以接收一个数组作为参数，可以覆盖 php.ini 中 session 的配置项。
比如，把 cache</em>limiter 设置为私有的，同时在阅读完 session 后立即关闭。</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">session_start</span><span class="p">([</span>
<span class="s1">'cache_limiter'</span> <span class="o">=&gt;</span> <span class="s1">'private'</span><span class="p">,</span>
<span class="s1">'read_and_close'</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
<span class="p">]);</span></code></pre></figure>

<h2>17、preg<em>replace</em>callback_array()</h2>

<p>新增了一个函数 preg<em>replace</em>callback<em>array() ，使用该函数可以使得在使用 
preg</em>replace_callback() 函数时代码变得更加优雅。</p>

<h2>18、CSPRNG</h2>

<p>新增两个函数 : random<em>bytes() and random</em>int()。可使得随机数变得安全了。
random<em>bytes() — 加密生存被保护的伪随机字符串
random</em>int() — 加密生存被保护的伪随机整数</p>

<h2>19、list()可支持数组式访问接口（ArrayAccess）</h2>

<h1>二、不兼容性</h1>

<h2>1、foreach 不再改变内部数组指针</h2>

<h2>2、foreach 通过引用遍历时，有更好的迭代特性</h2>

<p>当使用引用遍历数组时，现在 foreach 
在迭代中能更好的跟踪变化。例如，在迭代中添加一个迭代值到数组中，参考下面的代码：</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="vg">$array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="n">foreach</span> <span class="p">(</span><span class="vg">$array</span> <span class="n">as</span> <span class="o">&amp;</span><span class="vg">$val</span><span class="p">)</span> <span class="p">{</span>
<span class="n">var_dump</span><span class="p">(</span><span class="vg">$val</span><span class="p">);</span>
<span class="vg">$array</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="no">PHP5</span> <span class="err">输出：</span>
<span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="no">PHP7</span> <span class="err">输出：</span>
<span class="n">int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">int</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></code></pre></figure>

<h2>3、十六进制字符串不再被认为是数字</h2>

<h2>4、new 操作符创建的对象不能以引用方式赋值给变量</h2>

<h2>5、移除了 ASP 和 script PHP 标签</h2>

<p>受到影响的标签有： <code>&lt;% %&gt; 、 &lt;%= %&gt; 、 &lt;script language=&quot;php&quot;&gt; &lt;/script&gt;</code></p>

<h2>6、在数值溢出的时候，内部函数将会失败</h2>

<p>将浮点数转换为整数的时候，如果浮点数值太大，导致无法以整数表达的情况下， 
在之前的版本中，内部函数会直接将整数截断，并不会引发错误。 在 PHP 7.0 
中，如果发生这种情况，会引发 E_WARNING 错误，并且返回 NULL 。</p>

<h2>7、JSON 扩展已经被 JSOND 取代</h2>

<p>JSON 扩展已经被 JSOND 扩展取代。 对于数值的处理，有以下两点需要注意的： 
第一，数值不能以点号（ . ）结束 （例如，数值 34. 必须写作 34.0 或 34 ）。 
第二，如果使用科学计数法表示数值， e 前面必须不是点号（ . ） （例如， 3.e3 必须写作 3.0e3
 或 3e3 ）。</p>

<h2>8、INI 文件中 # 注释格式被 ; 替换</h2>

<h2>9 、 yield 变更为右联接运算符</h2>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">echo</span> <span class="k">yield</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="sr">//</span> <span class="err">在之前版本中会被解释为：</span>
<span class="n">echo</span> <span class="p">(</span><span class="k">yield</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="sr">//</span> <span class="err">现在，它将被解释为：</span>
<span class="n">echo</span> <span class="k">yield</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>

<span class="k">yield</span> <span class="vg">$foo</span> <span class="n">or</span> <span class="n">die</span><span class="p">;</span>
<span class="sr">//</span> <span class="err">在之前版本中会被解释为：</span>
<span class="k">yield</span> <span class="p">(</span><span class="vg">$foo</span> <span class="n">or</span> <span class="n">die</span><span class="p">);</span>
<span class="sr">//</span> <span class="err">现在，它将被解释为：</span>
<span class="p">(</span><span class="k">yield</span> <span class="vg">$foo</span><span class="p">)</span> <span class="n">or</span> <span class="n">die</span><span class="p">;</span></code></pre></figure>

<h2>10、$HTTP<em>RAW</em>POST_DATA 被移除，请使用 php://input 作为替代。</h2>

<p>参考：</p>

<p>1、http://php.net/manual/en/migration70.new-features.php#migration70.new-features.return-type-declarations</p>

<p>2、http://www.tuicool.com/articles/yARJRjQ</p>

      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags#php" title="Pages tagged php" class="tag"><span class="term">php</span></a></span>
        <span>Updated on <span class="entry-date date updated"><time datetime="2016-03-18">March 18, 2016</time></span></span>
        
        <!-- <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div> --><!-- /.social-share -->

      </footer>
    </div><!-- /.entry-content -->
    
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="/intro/Build-blog/" title="Build Blog">Build Blog</a></h3>
      <p>jekyll博客搭建 <a href="/intro/Build-blog/">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="/intro/optimize-mysql-query/" title="MySQL查询优化">MySQL查询优化</a></h4>
        <span>Published on November 26, 2016</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="/intro/optimize-mysql-index/" title="MySQL索引优化">MySQL索引优化</a></h4>
        <span>Published on October 14, 2016</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<!-- <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> -->








<script type="text/javascript">
    // sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2017 邵洪泉. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://github.com/aron-bordin/neo-hpstr-jekyll-theme" rel="nofollow">Neo-HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
